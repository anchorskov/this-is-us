{{/* layouts/townhall/interactive.html */}}
{{/* Interactive Town Hall UI Prototype (Scaffolded) */}}

{{ define "main" }}
<main class="max-w-screen-xl mx-auto px-4 py-10 space-y-10">

  <!-- ğŸŒ MAP SECTION (Leaflet.js placeholder) -->
  <section class="rounded-md shadow-md bg-white p-4">
    <h2 class="text-xl font-semibold mb-2">ğŸ“ Explore Conversations by Location</h2>
    <div id="townhall-map" class="h-96 w-full rounded"></div>
  </section>

  <!-- ğŸ” FILTER PANEL -->
  <section class="bg-white p-4 rounded-md shadow-md">
    <h2 class="text-xl font-semibold mb-4">ğŸ” Find What Matters to You</h2>
    <form id="filter-form" class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <input type="text" id="filter-location" placeholder="Enter city, state, or zipâ€¦" class="border p-2 rounded w-full" />
      <input type="text" id="filter-topic" placeholder="Topic (e.g., budget, school)" class="border p-2 rounded w-full" />
      <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Apply Filters</button>
    </form>
  </section>

  <!-- ğŸ§µ THREAD LIST -->
  <section class="space-y-6">
    <h2 class="text-xl font-semibold">ğŸ—£ï¸ Civic Conversations Near You</h2>
    <div id="thread-list" class="space-y-4">
      <!-- Threads dynamically loaded here -->
      <div class="p-4 border rounded shadow-sm bg-white">
        <p class="font-semibold">No conversations loaded. Try filtering above or create a new thread.</p>
      </div>
    </div>
  </section>

  <!-- ğŸ’¬ REPLY LISTING UI (injected dynamically per thread) -->
  <template id="reply-list-template">
    <div class="replies-wrapper mt-4 pl-6 border-l-4 border-blue-200">
      <h3 class="text-sm font-semibold text-gray-600 mb-2">Replies</h3>
      <div class="replies-container space-y-2 text-sm text-gray-800"></div>
    </div>
  </template>

  <!-- â• CREATE NEW THREAD -->
  <section class="bg-white p-4 rounded-md shadow-md">
    <h2 class="text-xl font-semibold mb-2">Start a New Conversation</h2>
    <form id="new-thread-form" class="space-y-4">
      <input type="text" id="new-title" placeholder="Title" class="w-full border p-2 rounded" required />
      <textarea id="new-body" rows="4" placeholder="Your opening commentâ€¦" class="w-full border p-2 rounded" required></textarea>
      <div class="flex justify-end">
        <button type="submit" class="bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700">Post Thread</button>
      </div>
    </form>
  </section>

</main>

<!-- JS Controllers -->
<script src="/js/townhall-interactive.js" defer></script>
<script src="/js/thread-replies.js" defer></script>
{{ end }}
