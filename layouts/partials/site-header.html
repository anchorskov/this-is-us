{{ $featured_image := partials.Include "func/GetFeaturedImage.html" . }}
{{ if $featured_image }}
  {{ $featured_image_class := site.Params.featured_image_class | compare.Default "cover bg-top" }}
  <header class="{{ $featured_image_class }}" style="background-image: url('{{ $featured_image }}');">
    {{ $cover_dimming_class := site.Params.cover_dimming_class | compare.Default "bg-black-60" }}
    <div class="{{ $cover_dimming_class }}">

      <!-- Header row: hamburger left, title centered -->
      <div class="flex items-center justify-between ph3 pt3">

        <!-- Hamburger (left) -->
        <div class="tl">
          <button class="menu-toggle" onclick="toggleMenu()">☰</button>
        </div>

        <!-- Title centered -->
        <div class="flex-auto tc">
          <h1 class="f2 f-subheadline-l fw2 white-90 lh-title ma0">
            This is US
          </h1>
        </div>

        <!-- Spacer (right) -->
        <div style="width: 2rem;"></div>

      </div>

      {{ partials.Include "site-navigation.html" . }}

    </div>
  </header>
{{ else }}
  <header>
    <div class="pb3-m pb6-l {{ .Site.Params.background_color_class | compare.Default "bg-black" }}">

      <div class="flex items-center justify-between ph3 pt3">

        <div class="tl">
          <button class="menu-toggle" onclick="toggleMenu()">☰</button>
        </div>

        <div class="flex-auto tc">
          <h1 class="f2 f-subheadline-l fw2 light-silver lh-title ma0">
            This is US
          </h1>
        </div>

        <div style="width: 2rem;"></div>

      </div>

      {{ partials.Include "site-navigation.html" . }}

    </div>
  </header>
{{ end }}

<script>
  function toggleMenu() {
    const menu = document.getElementById("main-menu");

    if (!menu) {
      console.log("❌ ERROR: Menu with id 'main-menu' not found.");
      return;
    }

    const isHidden = menu.classList.contains("hidden");
    const isVisible = menu.classList.contains("visible");

    console.log("☰ Button clicked.");
    console.log("Initial state — hidden:", isHidden, "visible:", isVisible);

    menu.classList.toggle("visible");
    menu.classList.toggle("hidden");

    console.log("✅ Menu toggled. New class list:", menu.className);
  }
</script>
