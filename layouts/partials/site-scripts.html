<!-- layouts/partials/site-scripts.html -->

<!-- üåê Set API Endpoint Dynamically -->
<script>
  (function () {
    const host = window.location.hostname;
    const port = window.location.port;

    if (host === 'localhost' && port === '1313') {
      window.EVENTS_API_URL = "https://this-is-us.org/api";
      console.log("üêõ Dev override ‚Üí", window.EVENTS_API_URL);
    } else {
      window.EVENTS_API_URL = "/api";
      console.log("üåê Using API ‚Üí", window.EVENTS_API_URL);
    }
  })();
</script>

<!-- üó∫Ô∏è Leaflet CSS & JS (with integrity and defer) -->
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
  crossorigin=""
/>
<script
  src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
  crossorigin=""
  defer
></script>

<!-- üîê Firebase Session Script (always loaded) -->
<script src="/js/firebase-session.js" defer></script>

<!-- üîì Firebase Login Script (only on login-required pages) -->
{{ if or (eq .RelPermalink "/login/") (eq .RelPermalink "/events/create/") }}
<script src="/js/firebase-login.js" defer></script>
{{ end }}
