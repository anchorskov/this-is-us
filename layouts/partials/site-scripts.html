<!-- layouts/partials/site-scripts.html -->

<script>
  console.log("‚úÖ Site scripts loaded correctly.");

  // Determine the base URL for the Events API
  (function() {
    const devHosts = ["localhost", "127.0.0.1"];
    const { hostname } = window.location;

    if (devHosts.includes(hostname)) {
      // In local development, point to Wrangler dev on port 8787
      window.EVENTS_API_URL = "http://127.0.0.1:8787/api";
      console.log("üêõ Dev override: EVENTS_API_URL ‚Üí", window.EVENTS_API_URL);
    } else {
      // In production, use the relative API path
      window.EVENTS_API_URL = "/api";
      console.log("üåê Production: EVENTS_API_URL ‚Üí", window.EVENTS_API_URL);
    }
  })();
</script>

<!-- Load Leaflet for interactive maps -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

{{ if and (eq .Section "events") (eq .Kind "section") }}
  <!-- Load Events Hub logic only on the Events section index page -->
  <script src="{{ "js/events/hub.js" | relURL }}"></script>
{{ end }}
