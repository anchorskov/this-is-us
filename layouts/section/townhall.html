{{- /* ─────────────────────────────────────────────────────────────
     layouts/section/townhall.html
     Town-Hall landing (hero + tabs + FAB)
   ───────────────────────────────────────────────────────────── */}}

{{ define "main" }}
<div class="mx-auto max-w-7xl px-4 py-8 space-y-10">

  <!-- 1 ░ HERO / LOCATION ░ -->
  <section class="bg-white shadow rounded-lg p-6 space-y-4">
    <h1 class="text-2xl font-bold">🏛️ Town Hall</h1>

    <div class="flex flex-col md:flex-row gap-3">
      <!-- ZIP-only search -->
      <input id="location-input"
             class="flex-1 border rounded p-2"
             maxlength="5"
             inputmode="numeric"
             pattern="[0-9]{5}"
             placeholder="Enter ZIP code…">
      <button id="use-my-location"
              class="bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700">
        📍 Use my location
      </button>
    </div>

    <!-- collapsible mini-map preview -->
    <div id="mini-map" class="h-56 w-full rounded mt-4 hidden"></div>
  </section>

  <!-- 2 ░ CONTENT TABS ░ -->
  <section class="space-y-4">
    <div class="border-b flex gap-6">
      <button data-tab="nearby"   class="tab-active">Nearby</button>
      <button data-tab="trending" class="hover:text-blue-600">Trending</button>
      {{ if hugo.IsServer }}
        <button data-tab="mine" class="hover:text-blue-600">My Threads</button>
      {{ end }}
    </div>

    <!-- LIST WRAPPERS -->
    <div id="tab-nearby"   class="thread-list grid md:grid-cols-2 gap-4"></div>
    <div id="tab-trending" class="thread-list hidden grid md:grid-cols-2 gap-4"></div>
    {{ if hugo.IsServer }}
      <div id="tab-mine" class="thread-list hidden grid md:grid-cols-2 gap-4"></div>
    {{ end }}
  </section>

  <!-- 3 ░ LIGHT SURVEY / POLL ░ -->
  <section id="poll-wrapper" class="bg-white shadow rounded-lg p-4 hidden"></section>

</div>

<!-- Floating Action Button -->
<button id="fab-new"
        class="fixed bottom-6 right-6 bg-blue-600 text-white rounded-full w-14 h-14
               flex items-center justify-center shadow-lg hover:bg-blue-700">
  +
</button>
{{ end }}
