{{/* layouts/events/section.html */}}

{{ define "head" }}
  {{ partial "head.html" . }}

  <!-- Leaflet CSS with integrity check -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />

  <!-- Events page-specific CSS -->
  <link rel="stylesheet" href="{{ "css/events.css" | relURL }}">
{{ end }}

{{ define "main" }}
<article class="prose mx-auto">
  <script>console.log("ğŸ‘‰ using custom events/section.html")</script>

  <!-- Render markdown content from _index.md -->
  {{ .Content }}

  <h1 class="f2 tc">ğŸ§­ Find Events Near You</h1>

  <!-- Map Controls (ZIP input + toggle buttons) -->
  {{ partial "events/map-controls.html" . }}

  <!-- Map Container -->
  <div
    id="map"
    class="my4"
    style="height: 70vh; width: 100%;"
    role="application"
    aria-label="Upcoming events map"
  ></div>

  <!-- Events List -->
  <div
    id="events-list"
    class="pa4"
    style="display: none;"
    aria-label="List of upcoming events"
  ></div>
</article>
{{ end }}

{{ define "scripts" }}
  <!-- Leaflet JS with integrity and defer -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
    defer
  ></script>

  <!-- Load the event hub map logic -->
  <script type="module" src="{{ "js/events/hub.js" | relURL }}" defer></script>
{{ end }}
