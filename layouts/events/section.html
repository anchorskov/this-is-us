{{/* layouts/events/section.html */}}

{{ define "head" }}
  {{ partial "head.html" . }}

  <!-- Leaflet CSS with integrity check -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />

  <!-- Events page-specific CSS -->
{{ end }}

{{ define "main" }}
 <!-- 🚧 construction banner (unchanged) -->
  <section class="bg-yellow-100 border-l-8 border-yellow-500 text-yellow-900 p-6
                   max-w-3xl mx-auto my-12 rounded-lg shadow-md">
    <h1 class="text-3xl font-bold mb-2">🚧 Page Under Construction</h1>
    <p class="text-lg mb-4">
      This feature is working so USE it! Select the pin on the map and then details to view the event.
      Send me your feedback, ideas, and any issues you find. 
    </p>
    <a
      href="https://u-pac.org/volunteer"
      class="inline-block px-6 py-3 bg-red-600 text-white font-semibold rounded
             hover:bg-red-700 transition"
    >
      🙋‍♂️ Volunteers Wanted – Join Us
    </a>
  </section>

  <!-- Render markdown content from _index.md -->
  {{ .Content }}

  <h1 class="f2 tc">🧭 Find Events Near You</h1>

  <!-- Map Controls (ZIP input + toggle buttons) -->
  {{ partial "events/map-controls.html" . }}

  <!-- Map Container -->
  <div
    id="map"
    class="my4"
    style="height: 70vh; width: 100%;"
    role="application"
    aria-label="Upcoming events map"
  ></div>

  <!-- Events List -->
  <div
    id="events-list"
    class="pa4"
    style="display: none;"
    aria-label="List of upcoming events"
  ></div>
</article>
{{ end }}

{{ define "scripts" }}
  <!-- Leaflet JS with integrity and defer -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
    defer
  ></script>

  <!-- Load the event hub map logic -->
  <script type="module" src="{{ "js/events/hub.js" | relURL }}" defer></script>
{{ end }}
